# ğŸ¤– G1 AGV Program - Robot Behavior Guide

## ğŸ“‹ Overview

á€¤ document á€á€½á€„á€º `g1_agv_client_example.cpp` program run á€á€±á€¬á€¡á€á€« robot á á€¡á€•á€¼á€¯á€¡á€™á€°á€€á€­á€¯ á€¡á€á€±á€¸á€…á€­á€á€º á€›á€¾á€„á€ºá€¸á€œá€„á€ºá€¸á€‘á€¬á€¸á€á€Šá€ºá‹

---

## ğŸ¬ Motion Pattern Summary

Program run á€á€±á€¬á€¡á€á€« robot á€á€Šá€º **Sine wave pattern** á€–á€¼á€„á€·á€º **á€¡á€†á€€á€ºá€™á€•á€¼á€á€º periodic motion** á€•á€¼á€¯á€œá€¯á€•á€ºá€™á€Šá€º:

| Motion Type | Description |
|-------------|-------------|
| á€›á€¾á€±á€·/á€”á€±á€¬á€€á€º á€›á€½á€±á€·á€œá€»á€¬á€¸á€á€¼á€„á€ºá€¸ | á€›á€¾á€±á€·á€á€½á€¬á€¸ â†” á€”á€±á€¬á€€á€ºá€†á€¯á€á€º |
| á€œá€¾á€Šá€·á€ºá€á€¼á€„á€ºá€¸ | á€˜á€šá€ºá€œá€¾á€Šá€·á€º â†” á€Šá€¬á€œá€¾á€Šá€·á€º |
| á€¡á€™á€¼á€„á€·á€ºá€á€»á€­á€”á€ºá€Šá€¾á€­á€á€¼á€„á€ºá€¸ | á€€á€­á€¯á€šá€ºá€™á€¼á€„á€·á€º â†” á€€á€­á€¯á€šá€ºá€”á€­á€™á€·á€º |

---

## ğŸ”„ Movement Cycle Details

### á€á€…á€ºá€•á€á€ºá€œá€Šá€º Cycle = 4 á€…á€€á€¹á€€á€”á€·á€º

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Time:     0s        1s        2s        3s        4s (repeat)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

vx:       0    â†’   +0.3   â†’    0    â†’   -0.3   â†’    0
          â”‚         â”‚          â”‚          â”‚         â”‚
Action:  á€›á€•á€º    á€›á€¾á€±á€·á€á€½á€¬á€¸     á€›á€•á€º     á€”á€±á€¬á€€á€ºá€†á€¯á€á€º    á€›á€•á€º


vyaw:     0    â†’   +0.3   â†’    0    â†’   -0.3   â†’    0
          â”‚         â”‚          â”‚          â”‚         â”‚
Action:  á€›á€•á€º    á€˜á€šá€ºá€œá€¾á€Šá€·á€º    á€›á€•á€º      á€Šá€¬á€œá€¾á€Šá€·á€º     á€›á€•á€º


height:   0    â†’   +1.0   â†’    0    â†’   -1.0   â†’    0
          â”‚         â”‚          â”‚          â”‚         â”‚
Action: á€•á€¯á€¶á€™á€¾á€”á€º   á€™á€¼á€„á€·á€ºá€œá€¬    á€•á€¯á€¶á€™á€¾á€”á€º    á€”á€­á€™á€·á€ºá€œá€¬    á€•á€¯á€¶á€™á€¾á€”á€º

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸ“Š Phase-by-Phase Breakdown

### Phase 1: 0s â†’ 1s (Rising Phase)

```
         â†— á€›á€¾á€±á€·á€á€­á€¯á€·
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ROBOT  â”‚  â† á€˜á€šá€ºá€˜á€€á€ºá€á€­á€¯á€· á€œá€¾á€Šá€·á€º
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘
    á€€á€­á€¯á€šá€ºá€œá€¯á€¶á€¸ á€™á€¼á€„á€·á€ºá€œá€¬
```

| Parameter | á€á€”á€ºá€–á€­á€¯á€¸ | Direction |
|-----------|--------|-----------|
| vx | 0 â†’ +0.3 m/s | á€›á€¾á€±á€·á€á€­á€¯á€· á€¡á€›á€¾á€­á€”á€ºá€™á€¼á€„á€·á€º |
| vyaw | 0 â†’ +0.3 rad/s | á€˜á€šá€ºá€á€­á€¯á€· á€œá€¾á€Šá€·á€º |
| height | 0 â†’ +1.0 | á€€á€­á€¯á€šá€ºá€œá€¯á€¶á€¸ á€™á€¼á€„á€·á€º |

---

### Phase 2: 1s â†’ 2s (Falling Phase)

```
         â†˜ á€”á€¾á€±á€¸á€œá€¬
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ROBOT  â”‚  â† á€œá€¾á€Šá€·á€ºá€á€¼á€„á€ºá€¸ á€”á€¾á€±á€¸á€œá€¬
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    á€€á€­á€¯á€šá€ºá€œá€¯á€¶á€¸ á€”á€­á€™á€·á€ºá€œá€¬
```

| Parameter | á€á€”á€ºá€–á€­á€¯á€¸ | Direction |
|-----------|--------|-----------|
| vx | +0.3 â†’ 0 m/s | á€›á€¾á€±á€·á€á€½á€¬á€¸á€›á€¬á€™á€¾ á€›á€•á€º |
| vyaw | +0.3 â†’ 0 rad/s | á€œá€¾á€Šá€·á€ºá€á€¼á€„á€ºá€¸ á€›á€•á€º |
| height | +1.0 â†’ 0 | á€•á€¯á€¶á€™á€¾á€”á€ºá€á€­á€¯á€· á€•á€¼á€”á€º |

---

### Phase 3: 2s â†’ 3s (Negative Rising)

```
         â†™ á€”á€±á€¬á€€á€ºá€á€­á€¯á€·
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ROBOT  â”‚  â†’ á€Šá€¬á€˜á€€á€ºá€á€­á€¯á€· á€œá€¾á€Šá€·á€º
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    á€€á€­á€¯á€šá€ºá€œá€¯á€¶á€¸ á€”á€­á€™á€·á€ºá€†á€¯á€¶á€¸
```

| Parameter | á€á€”á€ºá€–á€­á€¯á€¸ | Direction |
|-----------|--------|-----------|
| vx | 0 â†’ -0.3 m/s | á€”á€±á€¬á€€á€ºá€á€­á€¯á€· á€†á€¯á€á€º |
| vyaw | 0 â†’ -0.3 rad/s | á€Šá€¬á€á€­á€¯á€· á€œá€¾á€Šá€·á€º |
| height | 0 â†’ -1.0 | á€€á€­á€¯á€šá€ºá€œá€¯á€¶á€¸ á€”á€­á€™á€·á€º |

---

### Phase 4: 3s â†’ 4s (Return Phase)

```
         â†– á€”á€¾á€±á€¸á€œá€¬
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ROBOT  â”‚  â† á€œá€¾á€Šá€·á€ºá€á€¼á€„á€ºá€¸ á€”á€¾á€±á€¸á€œá€¬
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘
    á€€á€­á€¯á€šá€ºá€œá€¯á€¶á€¸ á€•á€¼á€”á€ºá€™á€¼á€„á€·á€º
```

| Parameter | á€á€”á€ºá€–á€­á€¯á€¸ | Direction |
|-----------|--------|-----------|
| vx | -0.3 â†’ 0 m/s | á€›á€•á€ºá€á€½á€¬á€¸ |
| vyaw | -0.3 â†’ 0 rad/s | á€›á€•á€ºá€á€½á€¬á€¸ |
| height | -1.0 â†’ 0 | á€•á€¯á€¶á€™á€¾á€”á€ºá€á€­á€¯á€· á€•á€¼á€”á€º |

---

## ğŸ“ˆ Velocity & Height Graphs

### Velocity (vx, vyaw) Graph

```
    +0.3 â”¤      â•­â”€â”€â”€â•®
         â”‚    â•­â•¯   â•°â•®
      0  â”¼â”€â”€â”€â•¯       â•°â”€â”€â”€â•®       â•­â”€â”€â”€
         â”‚               â•°â•®     â•­â•¯
   -0.3 â”¤                â•°â”€â”€â”€â•¯
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Time
         0    1    2    3    4    5s
```

### Height Graph

```
   +1.0 â”¤      â•­â”€â”€â”€â•®
         â”‚    â•­â•¯   â•°â•®
      0  â”¼â”€â”€â”€â•¯       â•°â”€â”€â”€â•®       â•­â”€â”€â”€
         â”‚               â•°â•®     â•­â•¯
   -1.0 â”¤                â•°â”€â”€â”€â•¯
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Time
         0    1    2    3    4    5s
```

---

## â±ï¸ Timing Specifications

| Item | Value | Calculation |
|------|-------|-------------|
| Move command interval | 50 ms | `usleep(50000)` |
| Height command interval | 50 ms | `usleep(50000)` |
| Total loop interval | 100 ms | 50 + 50 ms |
| Steps per cycle | 40 steps | `cycle_period = 40.0f` |
| Full cycle duration | 4 seconds | 40 Ã— 100ms |
| Loop frequency | 10 Hz | 1000ms / 100ms |
| Program duration | âˆ (Infinite) | `while(true)` |

---

## ğŸ“ Motion Parameters

| Parameter | Symbol | Max Value | Min Value | Unit |
|-----------|--------|-----------|-----------|------|
| Forward velocity | vx | +0.3 | -0.3 | m/s |
| Lateral velocity | vy | 0 | 0 | m/s (unused) |
| Angular velocity | vyaw | +0.3 | -0.3 | rad/s |
| Height adjustment | height | +1.0 | -1.0 | relative |

---

## ğŸ§® Mathematical Formula

### Sine Wave Generation

```
time_phase = (cycle_count % cycle_period) / cycle_period Ã— 2Ï€

vx = vx_amplitude Ã— sin(time_phase)
vyaw = vyaw_amplitude Ã— sin(time_phase)
height = height_amplitude Ã— sin(time_phase)
```

**Example Calculation (cycle_count = 10):**

```
time_phase = (10 % 40) / 40 Ã— 2Ï€
           = 10 / 40 Ã— 2Ï€
           = 0.25 Ã— 2Ï€
           = Ï€/2

vx = 0.3 Ã— sin(Ï€/2) = 0.3 Ã— 1 = 0.3 m/s
```

---

## ğŸ›‘ Program Control

### Start Program

```bash
./g1_agv_client_example
```

### Stop Program

```bash
Ctrl + C
```

âš ï¸ **Important:** Program á€á€Šá€º `while(true)` infinite loop á€–á€¼á€…á€ºá€á€±á€¬á€€á€¼á€±á€¬á€„á€·á€º manual stop á€œá€¯á€•á€ºá€›á€™á€Šá€ºá‹

---

## âš ï¸ Safety Precautions

| âš ï¸ Warning | Description |
|-----------|-------------|
| ğŸ”² Open Space | Robot á€•á€á€ºá€á€”á€ºá€¸á€€á€»á€„á€ºá€á€½á€„á€º á€¡á€á€¬á€¸á€¡á€†á€®á€¸ á€™á€›á€¾á€­á€…á€±á€› |
| ğŸ”´ Emergency Stop | E-Stop button á€€á€­á€¯ á€œá€€á€ºá€œá€¾á€™á€ºá€¸á€™á€®á€á€Šá€·á€ºá€”á€±á€›á€¬á€á€½á€„á€º á€‘á€¬á€¸ |
| ğŸ”‹ Battery Check | Battery level á€…á€…á€ºá€†á€±á€¸á€•á€¼á€®á€¸á€™á€¾ run |
| ğŸ‘€ Supervision | Program run á€”á€±á€…á€‰á€º robot á€€á€­á€¯ á€…á€±á€¬á€„á€·á€ºá€€á€¼á€Šá€·á€º |
| ğŸ“ Movement Range | á€›á€¾á€±á€·/á€”á€±á€¬á€€á€º á€›á€½á€±á€·á€™á€Šá€·á€º á€¡á€€á€½á€¬á€¡á€á€±á€¸ á€á€”á€·á€ºá€™á€¾á€”á€ºá€¸ (â‰ˆ 0.5m) |

---

## ğŸ¯ Expected Console Output

```
Call Move vx:0.0471 vyaw:0.0471 ret:0
Call HeightAdjust height:0.1564 ret:0
Call Move vx:0.0941 vyaw:0.0941 ret:0
Call HeightAdjust height:0.3090 ret:0
Call Move vx:0.1403 vyaw:0.1403 ret:0
Call HeightAdjust height:0.4540 ret:0
...
```

| Output Field | Meaning |
|--------------|---------|
| `vx:` | Current forward velocity |
| `vyaw:` | Current angular velocity |
| `height:` | Current height adjustment |
| `ret:0` | Success (0 = OK) |

---

## ğŸ“ Summary

Program run á€á€±á€¬á€¡á€á€« G1 robot á€á€Šá€º:

1. âœ… **á€›á€¾á€±á€·/á€”á€±á€¬á€€á€º á€šá€­á€™á€ºá€¸á€™á€Šá€º** - Sine wave pattern á€–á€¼á€„á€·á€º
2. âœ… **á€˜á€šá€º/á€Šá€¬ á€œá€¾á€Šá€·á€ºá€™á€Šá€º** - á€›á€¾á€±á€·/á€”á€±á€¬á€€á€º á€›á€½á€±á€·á€á€¼á€„á€ºá€¸á€”á€¾á€„á€·á€º sync á€–á€¼á€…á€ºá€™á€Šá€º
3. âœ… **á€¡á€•á€±á€«á€º/á€¡á€±á€¬á€€á€º á€›á€½á€±á€·á€™á€Šá€º** - Body height á€•á€¼á€±á€¬á€„á€ºá€¸á€œá€²á€™á€Šá€º
4. âœ… **4 á€…á€€á€¹á€€á€”á€·á€ºá€á€­á€¯á€„á€ºá€¸ á€•á€¼á€”á€ºá€…á€™á€Šá€º** - Continuous cycle
5. âš ï¸ **Manual stop á€œá€­á€¯á€¡á€•á€ºá€™á€Šá€º** - Ctrl+C á€–á€¼á€„á€·á€º á€›á€•á€ºá€›á€™á€Šá€º
